# Lab 6: "High Power" Control
<<<<<<< HEAD
### Jessica Wozniak & Ryan Hare
### Created: 11/1/17
### Last updated: 11/18/17

For starters, you will not be dealing with anything that is truly "high power". Instead, what I am considering "high power" is anything with the 
potential to damage or fry your microcontrollers if you were to drive them directly. The idea behind this part of the lab is to learn how not only 
to drive things that may require a high voltage or high current, but how to then protect your microcontroller from them.

## Switching
Most of you have used one of the types of switching circuits to control the RGB LEDs. For this part of the lab, you need to focus on the different 
types of switching circuits along with the differences in inductive and resistive loads.

### Relays
A relay is a electro-mechanical system which can open and close a switch based on an input. 
![Relay](https://www.phidgets.com/docs/images/1/1d/3051_1_Relay_Diagram.jpg)
These are extremely useful in situations where large amounts of current need to flow, such as in automotive applications, but they do have their limits.
 For starters, since the actuation process requires a constant current, sometimes this can be too much for your processor to handle. Second, a lot of 
 these relays require higher than 3.3V, which limits how you can actually turn these things on and off. Using the MSP430G2553, control the state of a 
 relay to drive a power resistor with +12V. Your README for this part should include a screenshot of the output of your MSP and the voltage across the 
 resistor. Try to figure out the switching speed limitations of the relay experimentally.

### MOSFET Switching
The MOSFET switch is a very simple circuit which can be used in a multitude of applications. One of the most important features of the MOSFET Switch 
is the near zero current it takes to switch the MOSFET from an on to an off state. There are two main architectures, low-side and high-side switch, 
each requiring a different type of MOSFET. Using the MSP430G2553, drive a power resistor with +12V in the same fashion as the relay. Obtain an 
MSP430G2553 voltage output along with the voltage through the power resistor. Try to figure out the switching speed limitations of the MOSFET 
experimentally.

## Deliverables
Along with what was asked in each part, you will need to utilize the DMM to determine what the current draw from each switch is and if that falls into 
spec with the Microcontroller. You need to then come up with the best configuration you can think of using to control something that requires large 
current, but also protects your processor from damage. The reason I am asking you to do this with just the G2553 is: A) The code is just generating a 
square wave, and B) this part of the lab runs the highest chance of damaging your parts and we have spare G2553's just in case.
=======
## Purpose
Microprocessors have countless applications in many different situations. A large amount of the possible applications involve the microprocessor being used to toggle a high power signal. It could be a motor, a high voltage speaker, or perhaps just a connection to a higher voltage system. However, the microprocessors are fragile. They can't supply a large amount of current, they only run at 3.3 volts, and if too much current is drawn or sent into one of the pins, it could cause permanent damage to the processor. To prevent this, there are several switching circuits that take the relatively low-voltage, low-current output from the processor and use that signal to control a much higher voltage and/or higher current signal or system.

### Code
The main.h file included in this part of the repository is for testing the switching circuits. The code initializes a timer and uses pin 1.0 as an output. Using timer interrupts, it generates a 1Hz square wave as an output signal on the output pin. This code could be easily modified to use a button to enable or disable the output instead of generating a constant square wave.

### Relays
Relays are mechanical devices that use the magnetic field generated by current in a coil to physically "flip" a switch, allowing large amounts of current to flow through.

![RelayCircuit](https://raw.githubusercontent.com/RU09342/lab-6taking-control-over-your-embedded-life-rj/master/High%20Power%20Control/Assets/RelayCircuit.png)

This circuit uses a transistor from the microprocessor to switch a relay. When this circuit was built and tested, the relay used was a Meishuo MAD-S-112-C. The relay would be connected to a high-power system. Below is a demonstration of the relay circuit functioning and toggling an LED.

![RelayGif](https://raw.githubusercontent.com/RU09342/lab-6taking-control-over-your-embedded-life-rj/master/High%20Power%20Control/Assets/RelayGif.gif)

There are upsides and downsides to using a relay as a high power switch. The upsides are that most relays are able to handle very high current. Because of this, relays would usually be better for toggling high-current systems. There is also no physical connection between the high-power system and the microprocessor.

However, the relay has downsides too. A lot of relays, including the one used above, require more than 3.3 volts to switch. This is why a transistor was used in the circuit above. Furthermore, the relay also requires a constant current to remain "on". It may be undesirable to have the processor supplying a constant current, even a small one. Finally, the relay is a mechanical device. It takes a small amount of time to switch. Through testing, it was found that the MAD-S-112-C relay is able to switch at a max rate of around 90Hz.

### MOSFET Switching
Another type of switch that can be used with the microprocessor for high-power applications is a MOSFET switch. The MOSFET switch is connected to the microprocessor in such a way that the chosen output pin on the microprocessor enables or disables the MOSFET, enabling or disabling an external (usually high-power) output.

There are two different MOSFET switching circuits that can work. The first one, shown below, is a High Side Switch. The High Side Switch uses a PMOS between the voltage supply and the load. This switch is useful for when the circuit that is being switched runs off of the same power supply as the microcontroller. For this configuration, it would be bad to have the supply voltage be too high, as it could damage the microcontroller. The High Side Switch will also be "off" when the microcontroller outputs 1 or high and "on" when the microcontroller outputs 0 or low.

![HighSideSwitch](https://raw.githubusercontent.com/RU09342/lab-6taking-control-over-your-embedded-life-rj/master/High%20Power%20Control/Assets/HighSideSwitch.png)

Then there is the Low Side Switch, shown below. The Low Side Switch uses an NMOS between the load and ground. This one will be "on" when the microcontroller is outputting a 1 or a high, and "off" when outputting a 0 or low.

![LowSideSwitch](https://raw.githubusercontent.com/RU09342/lab-6taking-control-over-your-embedded-life-rj/master/High%20Power%20Control/Assets/LowSideSwitch.png)

Like the relay, the MOSFET switch has upsides and downsides. The major upsides of using a MOSFET switch is that it requires barely any current from the output pin in order to switch the MOSFET. This is in contrast to the relay, which uses a somewhat large constant current in comparison.

The downsides of the MOSFET switch is that the relay is much better suited for very high current applications in comparison. Furthermore, the High Side Switch can only be used when the supply voltage of the circuit is the same as the microcontroller's supply voltage.
>>>>>>> 9820f253bbf2612044c988aeab6c70103e898f2b
